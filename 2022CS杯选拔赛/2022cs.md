## A⊕B 问题

求 $\sum_{i=0}^ni\oplus x \pmod p$，其中 $\oplus$ 是异或，质数 $p=10^9+7$。

输入一行两个整数 $n,x(1\le n,x\le10^{12})$

输出一行一个整数，代表你的答案

```c++
4 5
```

```c++
23
```

定义两个整数的异或 $a\oplus b$ 为先将 $a,b$ 转化为二进制，然后对每一位，若 $a,b$ 该位不同则该位结果为 $1$，否则为 $0$，各位都这么操作后得到结果。如 $3\oplus 5=(011)_2\oplus(101)_2=(110)_2=6$。

对样例，$(0\oplus5)+(1\oplus5)+(2\oplus5)+(3\oplus5)+(4\oplus5)=5+4+7+6+1=23$，而 $23\bmod p=23$。



## 养秋

> 你喜欢秋天吗？这是一个既充满希望，又充满绝望的季节呢。真是奇妙。

有一种神奇的理财产品，名为秋姐妹。秋的买入的价格随着买入的数量而变化。初始价格为 $11$ 蓝点。设当前已经购买了 $n$ 个秋，涨价系数为 $c$，则下一个秋的购买价格为 $\lfloor11c^n\rfloor$ 蓝点，其中 $\lfloor x\rfloor$ 代表 $x$ 的下取整。且每购买 $25$ 个秋价格会翻一番，即满足性质 $11c^{25+n}=2\times11c^n$。

一共有 $23$ 天。初始资金为 $25$ 蓝点。在第 $n$ 天结束前，你将获得基础蓝点数为 $f_n$，有：
$$
f_n=\begin{cases}
20,&1\le n\le6\\
35,&7\le n\le12\\
50,&13\le n\le18\\
80,&19\le n\le23
\end{cases}
$$
每天刚开始时，你可以选择购入任意数量的秋(只要蓝点足够)，从当天开始，购入的秋每天结束前都会产出 $1$ 蓝点收益；即设这天结束前你有 $h_n$ 个秋，当天秋的利润为 $h_n$。

此外，每天会有特殊事件，使得当天蓝点变动为 $g_n$，故第 $n$ 天的总收入为 $f_n+g_n+h_n$。

每天获取收益后，可以选择卖出任意数量秋。卖出的秋在以后的天数不再带来理财收入，为简单起见，规定每卖出一个秋能获得 $6$ 蓝点。

定义总利润为在这 $23$ 天里秋的秋的总产出减去购入秋的总成本(如果卖出了秋，卖秋所得蓝点也算入利润)。

给定 $g_n$，请你设计一个方案，使得总利润最大，输出最大的利润。

输入一行 $23$ 个整数，第 $i$ 个整数代表 $a_i(-f_i\le g_i\le10^8)$。

输出一行一个整数，代表最大的利润。

```c++
-20 -20 -20 -20 -20 -20 -35 -35 -35 -35 -35 -35 -50 -50 -50 -50 -50 -50 -80 -80 -80 -80 -80
```

```c++
150
```



```c++
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

```c++
533
```



```c++
7 0 0 0 0 1 25 35 4 4 4 8 8 8 8 55 12 12 12 12 12 12 12
```

```c++
580
```







## 01trie上动态点分治

给定长为 $n$ 的数组 $a$，下标从 $1$ 计算。给定整数 $k$。记 $\oplus$ 表示按位异或，$\oplus_{1\le j\le i}a_j$ 表示 $a_1\oplus a_2\oplus\cdots\oplus a_i$。求：
$$
\max_{k\le s\le n,s\le r\le n}\min_{r-s+1\le i\le r}\oplus_{1\le j\le i}a_j
$$
即求所有长度至少为 $k$ 的区间 $[r-s+1,r]$ 里每个区间异或和最小值的最大值。

未经优化的伪代码为：

```c++
ans = 0;
for (int s = k; s <= n; ++s) {
    for (int r = s; r <= n; ++r) {
        min_v = 2e9;
        for (int i = r - s + 1; i <= r; ++i) {
            xsum = 0;
            for (int j = 1; j <= i; ++j) {
                xsum ^= a[j];
            }
            min_v = min(min_v, xsum);
        }
        ans = max(ans, min_v);
    }
}
```

输入一行两个整数 $n,k(2\le n\le 2\times10^6,2\le k\le n)$。

接下来输入一行 $n$ 个整数，第 $i$ 个整数代表 $a_i(0\le a_i\le 10^9)$。

输出一行一个整数，代表答案。

```c++
8 2
0 1 1 2 6 5 2 7
```

```c++
3
```



## 选数

给定长为 $n$ 的随机序列 $a$，下标从 $0$ 开始。给定随机数种子 $seed$，则 $a$ 由如下随机算法 C++ 代码生成：(如果你是其他语言选手，请自行实现如下随机算法)

```c++
#include <bits/stdc++.h>
using namespace std;
const int maxn = 1e5 + 10;
long long seed, n, a[maxn];
long long nextRand()
{
    static long long x = seed;
    x ^= x << 11;
    x ^= x >> 45;
    x ^= x << 14;
    return (x % n + n) % n;
}
signed main()
{
    cin.tie(0)->ios::sync_with_stdio(false);
    cin >> n >> seed;
    for (int i = 0; i < n; ++i)
    {
        a[i] = nextRand();
    }
    return 0;
}
```

记 $f(x)=\sum_{i=0}^{n-1}a_i\oplus (x\times i)\pmod n$。其中 $\oplus$ 是异或运算。请从 $[0,n)$ 里选择两个不同的数 $u,v$，使得 $f(u)=f(v)$。

输入一行两个整数 $n,seed(3\le n\le10^5,1\le seed\le10^9)$。保证至少有一个解。

输出一行两个整数 $u,v(0\le u,v < n,u\neq v)$。

如果有多个解，输出任意一个即可。

```c++
5 1919810
```

```c++
0 2
```

对样例，$a=(4,1,2,0,0)$。计算得：$f(0)=2,f(1)=1,f(2)=2,f(3)=1,f(4)=2$，选择方案有 $(0,2),(0,4),(2,4),(1,3)$ 四种。

题目不保证 $f(x)$ 一定能以低于 $O(n)$ 的复杂度计算，请不要尝试化简或加速 $f(x)$ 的运算。 



## 可持久化线段树分治

有 $n$ 个人坐成一排开会，编号从 $1$ 到 $n$，第 $i$ 个人基础能力是 $a_i$。第 $i$ 个人与第 $i-1$ 个人的沟通速率为 $b_i$。区间在 $[l,r],l < r$ 的人可以组成讨论组，若讨论组内沟通速率均不小于 $k$，即 $b_{l+1},b_{l+2},\cdots,b_r\ge k$，则该讨论组的等级是 $k$。在讨论组内任选两个人 $u,v$，他们的贡献是 $a_ua_v$，则该讨论组的贡献是最大的 $a_ua_v$。

有 $n$ 个询问，每次问对给定的等级 $x$，能成立多少个至少 $x$ 级的讨论组，以及所有这些讨论组里，贡献最大的组贡献是多少。

输入一行一个整数 $n(1\le n\le 10^6)$。

接下来输入一行 $n$ 个整数，第 $i$ 个整数代表 $a_i(|a_i|\le10^9)$。

接下来输入一行 $n-1$ 个整数，第 $i$ 个整数 $b_{i+1}(1\le b_{i+1} < n)$ 且保证 $b$ 值域连续，即若存在某个 $b_j=c$，则对所有 $1\le c'< c$ 必然存在至少一个整数 $b_k=c'$。 

输出 $n$ 行，第 $i$ 行输出两个整数，为等级 $i$ 的讨论组数目和等级 $i$ 的最大贡献讨论组的贡献值。

```c++
10
7 4 8 3 4 4 7 1 6 2
2 3 2 1 1 3 2 1 3
```

```c++
45 56
10 56
3 32
0 0
0 0
0 0
0 0
0 0
0 0
0 0
```



```c++
12
-12 9 -6 3 -10 7 -4 1 11 -8 5 -2
2 5 8 2 4 7 10 1 3 6 9
```

```c++
66 120
34 120
15 55
12 40
9 27
7 16
5 7
3 -4
2 -4
1 -4
0 0
0 0
```

对样例一：

对 $x=3$ ，有且仅有讨论组 $[2,3],[6,7],[9,10]$，故有 $3$ 个讨论组，且最大贡献在 $[2,3]$ 取得，为 $4\times8=32$。

对 $x=2$，有讨论组 $[1,2],[1,3],[1,4],[2,3],[2,4],[3,4],[6,7],[6,8],[7,8],[9,10]$，共 $10$ 个，最大值可以在讨论组 $[1,3]$ 取得 $7\times8=56$，也可以在 $[1,4]$ 取得。

对 $x=1$，所有 $C_n^2=45$ 个讨论组都可行，最大值仍为 $7\times8=56$。



## 数位和

对于一个 $n$ 位十进制正整数 $x=\overline{x_nx_{n-1}\cdots x_2x_1}$，定义其数位和为 $f(x)=\sum_{i=1}^nx_i$。例如 $f(114514)=1+1+4+5+1+4=16$。设 $k$ 阶数位和为 $f^k(x)=f^{k-1}(f(x)),k > 1$。

给定 $n,x,k$，求 $f^k(x)$。

输入一行两个整数 $n,k(1\le n\le10^5,1\le k\le2^{31}-1)$。

输入第二行一个整数 $x(10^{n-1}\le x\le 10^n-1)$。

输出一行一个整数代表你的答案。

注意 $x$ 很大，请使用正确的方式输入、存储和输出。

```c++
6 1
114514
```

```c++
16
```



```c++
6 2
114514
```

```c++
7
```

对样例，$f(114514)=1+1+4+5+1+4=16$, $f^2(114514)=f(f(114514))=f(16)=1+6=7$。



