## 果冻的果树

果冻施肥金坷垃，种植了一棵二叉树，每个叶子节点都能长一个果子，果冻发现有 $m$ 个节点同时有左右儿子，请问这棵果树最少、最多分别有多少个果子？

###### 输入

输入一行一个整数 $t$ ，代表询问次数 $t(1\le t\le10^4)$ 

接下来输入 $t$ 行，每行一个整数 $m(0\le m\le10^9)$ 

###### 输出

对于每个询问，输出一行两个整数 $l, r$ ，代表最少和最多果子数

###### 样例

```c++
1
2
```

```c++
3 3
```

###### 标签

思维



## 云烟的正方体

学霸题，数正方体，头顶标注法，从上往下数，三层标上三，二层标上二，一层标上一，全部加起来，结果算出来，你学会了吗？

云烟是果冻的好朋友，他们在游戏里通过一场大炮对战结识。云烟摆放了若干正方体在 $n\times m$ 方格桌面上，每个正方体大小一致且受重力影响而不会悬空。云烟绘制出了 $n\times m$ 矩阵，记行从左到右递增，列从上到下递增，编号均从 $1$ 开始，第 $i$ 行第 $j$ 列的数字 $a_{i,j}$ 表示在桌面对应位置竖直摆放了 $a_{i,j}$ 个正方体，你可以通俗地理解矩阵 $a$ 为带透视的俯视图

现在云烟想要画出这堆立方体的正视图，按照三视图理论，设 $h=\max a_{i,j}$ ，则正视图应当有 $h$ 行 $m$ 列，第 $i$ 行第 $j$ 列表示第 $j$ 列高度为 $i$ 处能否看到正方体，若能看到，用 `*` 表示，否则用一个空格表示，你能帮助他吗？

###### 输入

首先输入一行两个整数 $n,m(1\le n,m,n\times m\le10^4)$ 

接下来输入 $n$ 行，每行 $m$ 个整数；其中第 $i$ 行第 $j$ 列为 $a_{i,j},0\le a_{i,j}\le100$

###### 输出

输出 $h$ 行，每行 $m$ 个字符，代表正视图

###### 样例

```c++
2 3
0 2 4
1 3 1
```

```c++
  *
 **
 **
***
```

###### 提示

p.s.: 如遇运行出错，那么你的代码可能实际上是内存超限的

###### 标签

小模拟



## 弥明的伤害分摊

弥明是白茶的好朋友，两人正联机在打 BOSS。他们因为太怕痛了所以全点了防御力。弥明、白茶的防御力分别是 $a,b$ ，并且他们拥有一项团队技能，可以将 BOSS 的每次攻击分摊到两人身上。假设这次攻击的攻击力为 $k$，且已知 BOSS 的攻击破防指数为 $p$  ，那么该技能可以将 $k$ 分摊为两个实数 $x,y$，满足 $x+y=k$ (注：$x,y$ 可以是负数)，使得 BOSS 对弥明和白茶分别造成 $\sqrt{p-a+x^2}$，$\sqrt{p-b+y^2}$ 的伤害

弥明希望 BOSS 的每次攻击对两人造成的伤害总和最少，求这样的分摊方案

###### 输入

首先输入一行三个整数 $p,a,b\ (0\le p,a,b\le10^9, a\le p, b\le p, ab > 0)$

接下来输入一行一个整数 $t(1\le t\le10^5)$，代表 BOSS 会进行 $t$ 次攻击

接下来输入 $t$ 行，每行一个实数 $k(0 < k\le10^9)$，代表 BOSS 该次攻击的攻击力

输入保证有解且答案唯一，保证输入的小数的小数位均不超过六位

###### 输出

输出 $t$ 行，每行两个实数 $x,y$，表示使得对弥明和白茶造成的伤害总和最少的 $x,y$ 

你的答案被认为是正确的当且仅当你的答案与标准答案的相对误差、绝对误差其一不超过 $10^{-2}$ ，即设你的答案为 $r$ ，标准答案为 $r'$ ，当且仅当满足 $\dfrac{|r-r'|}{\max(1,r')}\le10^{-2}$ 时你的答案视为正确

###### 样例

```c++
10 8 5
2
11.0
58.3
```

```c++
4.261685 6.738315
22.586929 35.713071
```

###### 提示

提示1：如果你样例可以通过但答案错误，请尝试提高精度，如部分变量的计算可精确到小数点后十二位

提示2：本题灵感来自 [这个视频](https://www.bilibili.com/video/BV1tJ411G78j?from=search&seid=2867147286032023715&spm_id_from=333.337.0.0) ，观看这个视频也许不能帮你解出题目，但也许能给你带来快乐；希望能启发你往几何上去思考问题 QwQ

提示3：建议请不要使用微分法或蒙特卡罗法枚举，精度不够，枚举次数过多，容易造成超时

提示4：如果你确信你的时间复杂度是正确的，但仍超时，请尝试使用较为快速的读入方法，如关闭同步流、使用 `scanf, printf` 乃至快读快写

提示5：可以通过的解法有多种，包括但不限于[三分法](https://oi-wiki.org/basic/binary/#_10) , 数学推理, [爬山算法](https://oi-wiki.org/misc/hill-climbing/) ；如果你不会这些算法，可以点击链接现学 >_<

提示6：如果你的三分法或爬山算法超时，且你认为你的复杂度正确，请尝试减少精度或特判 $a=0 / b=0$ 

提示7：如果你使用数学推理法，样例通过但答案错误，请尝试不要分母有理化或改变计算顺序，以减小精度误差

提示8：推荐输出的答案保留六位小数

###### 标签

数学,三分,爬山算法

###### SPJ

```c++
// #include <bits/stdc++.h>
#define oj
// #undef oj
#ifdef oj
#include "testlib.h"
#endif
typedef long long ll;
typedef double db;
#define re register
using namespace std;
#define sc(x) scanf("%lld", &x)
#define rep(i, a, b) for (re ll i = a; i < b; ++i)
#define repe(i, a, b) for (re ll i = a; i <= b; ++i)
#define red(i, a, b) for (re ll i = a; i > b; --i)
#define rede(i, a, b) for (re ll i = a; i >= b; --i)
db a, b, c;
ll t;
signed main(int argc, char *argv[])
{
    registerTestlibCmd(argc, argv);
    for (ll i = 0; i < 4; ++i)
    {
        t = inf.readInt();
    }
    for (ll i = 0; i < t; ++i)
    {
        for (ll j = 0; j < 2; ++j)
        {
            b = ouf.readReal();
            c = ans.readReal();
            if (!doubleCompare(c, b, 1e-2))
                quitf(_wa, "WA");
        }
    }
    quitf(_ok, "AC");
}
```





## 桑泽的质监

桑泽打完了一场比赛，荣获了四等奖。他感到了世界的参差，于是他收收心，找了个元宇宙电子厂上班

![image-20220129154505656](img/image-20220129154505656.png)

该电子厂生产电子白茶。一开始流水线上有 $n$ 罐茶，生产编号从 $1$ 开始递增。编号为 $i$ 的茶质量指标为 $p_i$ 

桑泽负责质检，他需要随时汇报当前所有茶质量指标的标准差 $s$ ，对长为 $m$ 的数组 $a$ ，下标从 $1$ 开始，则标准差计算公式为：
$$
\overline a=\dfrac1m\sum_{i=1}^ma_i\quad,s=\sqrt{\dfrac1m\sum_{i=1}^m (a_i-\overline a)^2}
$$
然而流水线是变化的，经常会发生下面三种操作：

1. 在流水线队尾增加一罐茶，编号 $j$ 为当前最大编号 $+1$ 
2. 取走流水线上编号最小的一罐茶
3. 重新加工编号为 $j$ 的茶，更改其质量指标 $p_j$

每次操作结束后，桑泽都需要汇报流水线上所有茶质量指标的标准差，请你帮他完成这个任务

###### 输入

输入一行两个整数 $n,m(1\le n,m\le10^5)$ ，代表初始茶的罐数和操作次数

接下来输入一行 $n$ 个整数，第 $i$ 个整数代表 $p_i(1\le p_i\le10^5)$

接下来输入 $m$ 行，每行的输入格式为下面三者之一：

- 两个整数 `1 w` ，代表执行操作 $1$ ，且增加的茶质量指标为 $w$
- 一个整数 `2` ，代表执行操作 $2$
- 三个整数 `3 x y` ，代表执行操作 $3$ ，将编号为 $x$ 的茶质量指标更改为 $y$

保证 $1\le w,y\le10^5$ 且编号为 $x$ 的茶一定在流水线上；保证执行任何操作后流水线上至少有一罐茶

###### 输出

输出 $m$ 行，每行一个实数 $r_i$，代表第 $i$ 次操作后流水线上所有茶质量指标的标准差

你的答案被视为是正确的当且仅当你的答案与标准答案的**绝对误差**不超过 $10^{-2}$ 

###### 样例

```c++
6 4
3 1 4 1 5 9
1 3
3 2 4
2
3 7 10
```

```c++
2.547508
2.294625
2.426703
3.095696
```

###### 提示

提示1:若你认为你的代码无误且复杂度正确，请检查是否有爆 `int` (请参考 [一鸣师姐的粤语课](https://socoding.cn/t/topic/260))，下标或长度不正确等问题；特别地，**本题有可能会爆 `long long`**，请你在你认为将要爆 `long long` 的时候将其转化为 `__int128` 或 `double` 

提示2:当你过了 $8$ 个测试点还剩一个没过时，请考虑常数列样例

提示3:由于浮点误差，可能会出现 $x-x < 0$ ，从而使得开方失败出现 `nan` 

提示4:请使用较为快速的读入和输出方式，建议不要用 `cin, cout`

提示5:错的比较多的测试点特征为:①测试点 $1$ 一开始只有一个数，然后不断执行操作 `1,2,1,2,....`，执行 $10^5$ 次 ②测试点 $2$ 一开始有 $10^5$ 个数，删除 $10^5-1$ 次，然后插入 $1$ 次 ③除测试点 $9$ 质量是常数外，其他测试点质量都是 $[1,10^5]$ 内随机数

鉴于过题人数过少，现放出本题的数据生成器，[链接](https://cloud.socoding.cn/s/VmdtO) ，可用来生成数据对拍

###### 标签

预处理,数学

###### SPJ

```c++
// #include <bits/stdc++.h>
#define oj
// #undef oj
#ifdef oj
#include "testlib.h"
#endif
typedef long long ll;
typedef double db;
#define re register
using namespace std;
#define sc(x) scanf("%lld", &x)
#define rep(i, a, b) for (re ll i = a; i < b; ++i)
#define repe(i, a, b) for (re ll i = a; i <= b; ++i)
#define red(i, a, b) for (re ll i = a; i > b; --i)
#define rede(i, a, b) for (re ll i = a; i >= b; --i)
db a, b, c;
ll t;
signed main(int argc, char *argv[])
{
    registerTestlibCmd(argc, argv);
    for (ll i = 0; i < 2; ++i)
    {
        t = inf.readInt();
    }
    for (ll i = 0; i < t; ++i)
    {
        b = ouf.readReal();
        c = ans.readReal();
        if (abs(c - b) > 1e-2)
            quitf(_wa, "WA");
    }
    quitf(_ok, "AC");
}
```





## 锦乐的记忆流

锦乐正在练习记忆术，他搭建了一个奇怪的记忆宫殿，其中他定下了 $n$ 个记忆桩子，每个桩子代表一件用于联想的事物，编号从 $1$ 到 $n$ 递增。锦乐的桩子连成一个环，编号为 $i(1< i< n)$ 的桩子与编号为 $i-1,i+1$ 的桩子相连，且编号为 $1,n$ 的桩子也相连，形成闭环

然而锦乐未得精髓，所以当锦乐从编号为 $u$ 桩子出发时，要联想到桩子 $v$ 时，他必须沿着编号递增或递减的方向从 $u$ 在环上一路联想，思绪从一个桩子不断走到相邻的桩子，形成一股记忆流，最终到达 $v$ 。严谨地说，若 $(x\bmod n)+1=y$ ，则 $x\to y$ 是递增顺序的，若 $(y\bmod n)+1=x$ ，则 $x\to y$ 是递减顺序的。因此注意 $n > 2$ 时， $1\to n$ 属于递减，且 $n\to 1$ 属于递增，特别地 $n=2$ 时 $1\to n,n\to 1$ 既可以递增也可以递减 

特别地，对锦乐而言，每个桩子有一个特征系数，编号为 $i$ 的桩子特征系数为 $a_i$ 。沿着记忆流从 $x$ 联想到相邻桩子 $y$ 时，若 $a_x\ge a_y$ ，那么锦乐可以一瞬间从 $x$ 桩子联想到 $y$；否则联想有困难，此时锦乐需要耗费 $a_y-a_x$ 毫秒才能联想到 $y$ 。当锦乐从环上任一桩子 $u$ 出发寻找 $v$ 时，他的左脑会沿着编号递增方向在环上联想，他的右脑会沿着编号递减方向在环上联想，左右脑同时各自开始联想，想起 $v$ 的时间是左脑记忆流和右脑记忆流中总用时较短的一方

现在锦乐想知道，从任一个桩子 $u$ 开始联想直到想起桩子 $v$ 需要用多少毫秒

###### 输入

首先输入一行两个整数 $n,q(2\le n\le10^5,1\le q\le10^5)$ 

接下来输入一行 $n$ 个整数，第 $i$ 个整数代表 $a_i(1\le a_i\le10^4)$

接下来输入 $q$ 行，每行两个整数 $u,v(1\le u,v\le n,u\neq v)$ ，代表一次询问中联想的起点和终点

###### 输出

输出 $q$ 行，对于每个询问，依次输出一行一个整数代表所用毫秒数

###### 样例

```c++
6 3
1 1 4 5 1 4
2 4
2 5
2 1
```

```c++
4
3
0
```

###### 标签

前缀和





## 白茶的猫猫自动机(Easy Version)

白茶水群时看到了很多猫猫头表情包，他大为喜爱并悉数收藏。随后，他借助在千层塔获得的 AI 训练了一个聊天自动机

自动机有 $n$ 个表情状态，编号为 $1$ 到 $n$ ，起始状态为 $1$ 。状态 $x$ 的有效聊天信号集合长度为 $m_x$ ，第 $i(1\le i\le m_x)$ 个聊天信号编号为 $t_{x,i}$ ，接受该信号会转移到状态 $s_{x,i}(1\le s_{x,i}\le n)$。在 $x$ 状态处接受一个有效聊天信号 $t_{x,j}(1\le j\le m_x)$时，会从该状态转移到另一个状态 $s_{x,j}$，并发送表情包 $s_{x,j}$ ；若接受的聊天信号不在有效聊天信号集合内，将会从该状态转移到起始状态 $1$，并发送表情包 $1$ 

现给定聊天信号组成的序列，长度为 $q$ ，请求出接受这个序列的信息后发送的表情包序列

###### 输入

输入一行两个整数 $n,q(1\le n,q\le2\times 10^4)$

接下来输入 $n$ 行，其中第 $i$ 行首先输入一个整数 $m_i$ ，接下来输入 $2m_i$ 个整数，其中第 $2j-1(1\le j\le m_i)$ 个整数代表 $t_{i,j}(1\le t_{i,j}\le10^5)$ ，第 $2j$ 个整数代表 $s_{i,j}(1\le s_{i,j}\le n)$ 

保证 $1\le \sum_{i=1}^nm_i\le 10^5$ ，且 $\forall 1\le i\le n$ ，保证所有 $1\le j\le m_i$ 有 $t_{i,j}$ 不重复 

接下来输入一行 $q$ 个整数，第 $i$ 个整数 $a_i$ 聊天序列的第 $i$ 个信号为 $a_i(1\le a_i\le10^5)$

###### 输出

输出一行 $q$ 个整数，第 $i$ 个整数代表自动机产生的第 $i$ 个表情包

###### 样例

```c++
5 7
3 1 2 2 3 3 4
0
1 1 5
1 1 5
1 2 2
1 1 2 1 2 3 3
```

```c++
2 1 3 5 2 1 4
```

###### 提示

样例如图所示：

![无标题-22](img/无标题-22.gif)

由于未知原因，对于每个询问，本题必须使用在线算法(即一边输入一边输出)，不可以全部输入再全部输出，否则会WA

###### 标签

哈希表,图论



## 白茶的猫猫自动机(Hard Version)

> 你只需要完成白茶的猫猫自动机(Hard)或禾枫的仙人掌任意一题即可完成第七天打卡任务

白茶水群时看到了很多猫猫头表情包，他大为喜爱并悉数收藏。随后，他借助在千层塔获得的 AI 训练了一个聊天自动机

自动机有 $n$ 个表情状态，编号为 $1$ 到 $n$ ，起始状态为 $1$ 。状态 $x$ 的有效聊天信号集合长度为 $m_x$ ，第 $i(1\le i\le m_x)$ 个聊天信号编号为 $t_{x,i}$ ，接受该信号会转移到状态 $s_{x,i}(1\le s_{x,i}\le n)$。在 $x$ 状态处接受一个有效聊天信号 $t_{x,j}(1\le j\le m_x)$时，会从该状态转移到另一个状态 $s_{x,j}$，并发送表情包 $s_{x,j}$ ；若接受的聊天信号不在有效聊天信号集合内，将会从该状态转移到起始状态 $1$，并发送表情包 $1$ 

现给定聊天信号组成的序列，由于聊天序列过长且重复度高，所以将其进行了**行程长度编码**；编码后的序列有 $q$ 行，每行两个整数 $u,v$ ，代表 $u$ 出现了 $v$ 次，并且由于自动机生成的表情包过多，你只需要输出最后生成的表情编号即可

###### 输入

输入一行两个整数 $n,q(1\le n\le10^2，1\le q\le 10^5)$

接下来输入 $n$ 行，其中第 $i$ 行首先输入一个整数 $m_i$ ，接下来输入 $2m_i$ 个整数，其中第 $2j-1(1\le j\le m_i)$ 个整数代表 $t_{i,j}(1\le t_{i,j}\le10^2)$ ，第 $2j$ 个整数代表 $s_{i,j}(1\le s_{i,j}\le n)$ 

保证 $1\le \sum_{i=1}^nm_i\le 10^4$ ，且 $\forall 1\le i\le n$ ，保证所有 $1\le j\le m_i$ 有 $t_{i,j}$ 不重复 

接下来输入 $q$ 行，每行两个整数 $u_i, v_i(1\le u\le 10^2,1\le v_i\le10^9)$ 

###### 输出

输出一行一个整数，代表最后生成的表情包

###### 样例

```c++
5 5
3 1 2 2 3 3 4
0
1 1 5
1 1 5
1 2 2
1 2
2 1
1 1
2 1
3 2
```

```c++
4
```

###### 提示

样例如图所示：

![无标题-22](img/无标题-22.gif)

###### 标签

图论,倍增,周期性



## 禾枫的仙人掌

> 你只需要完成白茶的猫猫自动机(Hard)或禾枫的仙人掌任意一题即可完成第七天打卡任务

大漠孤烟直，长河落日圆。禾枫在沙漠探险，在沙漠发现了许多仙人掌。定义仙人掌是每条边最多在一个环内的无向连通图。定义沙漠是多棵仙人掌的组合。例如在下面图片表示的沙漠中，$A,B,C$ 是仙人掌

![image-20220129131355209](img/image-20220129131355209.png)

若对一棵仙人掌，规定点编号从 $1$ 开始递增，删去其中若干条边得到它的一个子图，请问在所有这样的得到的子图(不含自身)中，有多少个子图是连通图？由于答案可能过大，你只需要输出答案对 $10^9+7$ 取模的结果

###### 输入

输入一行两个整数 $n,m(3\le n\le 10^5,1\le m\le 2n)$ ，代表仙人掌的点数和边数

接下来输入 $m$ 行，每行两个整数 $u,v(1\le u,v\le n)$ ，代表一条无向边 $(u,v)$ 

输入保证是一个至少有一个环的仙人掌，且保证输入为简单图(即无自环和重边)

###### 输出

输出一个整数代表答案

###### 样例1

```c++
8 8
1 2
2 3
3 4
4 5
5 6
6 7
7 2
5 8
```

```c++
6
```

###### 样例2

```c++
14 15
1 5
2 5
3 5
4 5
6 5
6 7
6 8
9 7
9 8
9 10
11 10
11 12
11 13
12 13
10 14
```

```c++
19
```

###### 提示

样例 $1,2$ 分别是上图所示的 $A,B$

###### 标签

图论,数学,连通性



> 注：保证不会出现像上述 $C$ 图一样一个点在多个环内的情况，即输入均为每个点最多属于一个环的特殊仙人掌 (实际上也能解)
